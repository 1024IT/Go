{
	"info": {
		"_postman_id": "abb9b689-642d-4eb3-a112-83bd66ebb6aa",
		"name": "go_sample_collection",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "36722686"
	},
	"item": [
		{
			"name": "Create User Request",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// リクエスト実行前にユーザー一覧からデータ件数を取得",
							"pm.sendRequest(\"http://localhost:3001/api/v1/users\", function (err, response) {",
							"    const　beforeDataCount = response.json().length",
							"    pm.variables.set(\"beforeDataCount\", beforeDataCount);",
							"    console.log(beforeDataCount);",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"// リクエスト実行後にユーザー一覧からデータ件数を取得し、リクエスト実行前のデータ件数と比較",
							"pm.sendRequest(\"http://localhost:3001/api/v1/users\", function (err, response) {",
							"    const beforeDataCount = pm.variables.get(\"beforeDataCount\");",
							"    const afterDataCount = response.json().length;",
							"",
							"    pm.test(\"ユーザーのデータ件数が１件増加\", function () {",
							"        pm.expect(afterDataCount).to.eql(beforeDataCount + 1);",
							"    });",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"name\": \"test user\",\n    \"email\": \"test@example.com\",\n    \"uid\": \"unique_uid_\" + Date.now(), // 一意のUIDを生成\n    \"password\": \"securepassword\"\n};",
					"options": {
						"raw": {
							"language": "javascript"
						}
					}
				},
				"url": {
					"raw": "http://localhost:3001/api/v1/users",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "3001",
					"path": [
						"api",
						"v1",
						"users"
					]
				}
			},
			"response": []
		},
		{
			"name": "Show User Request",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// リクエスト実行前にユーザー一覧から取得した最後のデータのidを変数「paramId」に設定",
							"pm.sendRequest(\"http://localhost/api/v1/users\", function (err, response) {",
							"    const　lastUserData = response.json().pop()",
							"    pm.variables.set(\"paramId\", lastUserData.id);",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"// パラメータ「id」が「paramId」のユーザーのレスポンスの結果を確認",
							"pm.test(\"id == paramId\", function () {",
							"    const paramId = pm.variables.get(\"paramId\");",
							"    pm.expect(pm.response.json().id).to.eql(paramId);",
							"});",
							"pm.test(\"uid == uid:test3\", function () {",
							"    pm.expect(pm.response.json().uid).to.eql(\"uid:test3\");",
							"});",
							"pm.test(\"name == test3\", function () {",
							"    pm.expect(pm.response.json().name).to.eql(\"test3\");",
							"});",
							"pm.test(\"email == test3@example.com\", function () {",
							"    pm.expect(pm.response.json().email).to.eql(\"test3@example.com\");",
							"});",
							"pm.test(\"created_at is not null\", function () {",
							"    pm.expect(pm.response.json().created_at).not.eql(null);",
							"});",
							"pm.test(\"updated_at is not null\", function () {",
							"    pm.expect(pm.response.json().updated_at).not.eql(null);",
							"});",
							"pm.test(\"deleted_at is null\", function () {",
							"    pm.expect(pm.response.json().deleted_at).to.eql(null);",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:3001/api/v1/users/:id",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "3001",
					"path": [
						"api",
						"v1",
						"users",
						":id"
					],
					"variable": [
						{
							"key": "id",
							"value": "{{paramId}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Update User Request",
			"request": {
				"method": "PATCH",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"name\":\"Sample_User_3\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:3001/api/v1/users/:id",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "3001",
					"path": [
						"api",
						"v1",
						"users",
						":id"
					],
					"variable": [
						{
							"key": "id",
							"value": "3"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Delete User Request",
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "http://localhost:3001/api/v1/users/:id",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "3001",
					"path": [
						"api",
						"v1",
						"users",
						":id"
					],
					"variable": [
						{
							"key": "id",
							"value": "3"
						}
					]
				}
			},
			"response": []
		}
	]
}